 

# 计算机网络期中知识总结

[TOC]

## Chapter1 应用层

### 1.1 Internet

1. 具体构成

   ``` mermaid
   graph LR;
   应用层 --> 终端设备
   应用层 --> 通信链路
   应用层 --> 分组交换机
   路由("路由(序列)") --> 通信链路
   路由("路由(序列)") --> 分组交换机
   ISP("ISP(网络)") --> 分组交换机
   ISP --> 通信链路
   
   
   ```

   **Internet 是 按松散的层次组织结构、并且遵循TCP/IP协议的ISP集合**

2. 服务

   服务内容：

   * 源主机到目的主机的可靠数据交付
   * 尽力而为的数据交付

   **Internet是为分布式应用提供通信服务的基础设施**

3. 协议

   定义了通信实体之间交换的报文的格式和次序，以及在报文发送、接收或收到其他事件后采取的动作



### 1.2 网络边缘

	1. 接入网
 	2. 物理媒体







## Chapter3 传输层

### 3.1 传输层提供的服务

传输层提供了进程之间的<font color = "red">逻辑通信</font>

#### 传输层和网络层的区别

|        | 逻辑通信主体 | 能提供的网络服务                                     | 不能提供的网络服务 |
| ------ | ------------ | ---------------------------------------------------- | ------------------ |
| 网络层 | 主机         | 尽力而为：不保证可靠、不保证按序、<br>不保证数据完整 |                    |
| 传输层 | 进程         | TCP：保证可靠、按序 <br> UDP：不保证可靠、按序       | 延迟保证、带宽保证 |

### 3.2 多路复用和多路分解

#### 多路复用和多路分解的定义

发送端多路复用：从多个套接字收集数据，交给网络层发送  

接收端多路分解：将收到的报文段交付到正确的套接字

#### 多路复用和多路分解的实现

1. 相关标识和设置

   * 主机中每个套接字应分配一个<font color = "red">唯一的标识</font>

   * 报文段中有<font color = "red">特殊字段</font>指示要交付的套接字

   * 发送方传输层需在报文段中包含<font color = "red">目的套接字标识</font>（多路复用）

   * 接收方传输层需将报文段中的目的套接字标识<font color = "red">与本地套接字标识进行匹配</font>，将报文段交付到正确的套接字（多路分解)  

2. 套接字与端口号

   * 端口号是套接字标识的组成部分。端口号是一个16比特的数，其中0～1023保留公共域协议使用，称众所周知的端口号。  
   * 源端口号：与发送进程关联的本地端口号
   * 目的端口号：与接收进程关联的本地端口号  

   <font color = "Blue">UDP套接字标识二元组（IP地址，端口号）</font>

   

#### 无连接多路分解与面向连接的多路分解

|          | 接收报文                                                     | 发送报文                                                     |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 无连接   | 检查报文端口号 <br>将报文交付到对应端口号的套接字 <br>交付与源IP地址和源端口号无关 | 源IP地址和源端口号用于 发送响应报文                          |
| 面向连接 | 使用四元组<font color = "Blue">（源IP地址，源端口号，目的IP地址，目的端口号）</font>将报文交付到正确套接字 | 1. 服务器创建欢迎套接字<br>2.客户创建客户套接字<br>3.服务器接到请求创建一个连接套接字 |

### 3.3 无连接传输UDP

#### UDP报文结构和服务

|      | 提供的服务                       | 不提供的服务                           |
| ---- | -------------------------------- | -------------------------------------- |
| UDP  | 多路复用多路分解<br>检测报文错误 | 可靠交付<br>按序交付<br>延迟及带宽保证 |

UDP报文结构图

![image-20201030170043003](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20201030170043003.png)

#### UDP检查和

1. 检查和目标：在传输报文中检查错误

2. 检查和起效方式

   * 发送方

     * 将报文看成是由16比特整数组成的序列

     * <font color = "Blue">对这些整数序列计算检查和（包括伪头、UDP头和数据）</font>

       ![image-20201030171336355](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20201030171336355.png)

     * 将检查和放到UDP报文的checksum字段

   * 接收方:
     - 对收到的报文计算检查和
     - 与报文中的checksum字段对比
       - 相等无错
       - 不相等有错

#### UDP的实际意义

* 没有建立连接的延迟
* 协议简单：发送端和接收端不需要保存连接状态
* 报头开销小
* 没有拥塞控制和流量控制

### 3.4 可靠数据传输原理

